<div class="profile">
  <h2 class="profile__title">{{ userFullName }}</h2>
  <form class="profile__form" [formGroup]="profileForm" (ngSubmit)="onSubmit()">
    <div class="profile__field">
      <div *ngIf="currentPhotoUrl" class="profile__photo-preview">
        <img
          [src]="currentPhotoUrl"
          alt="Photo de profil actuelle"
          class="profile__photo-preview-img"
        />
      </div>
      <label for="photo" class="profile__label">Photo de profil</label>
      <input
        type="file"
        class="profile__input"
        (change)="onFileChange($event)"
        accept="image/*"
      />
    </div>

    <div class="profile__firstInputs">
      <div class="profile__field">
        <label for="firstName" class="profile__label">Prénom</label>
        <input
          type="text"
          class="profile__input"
          formControlName="firstName"
          required
        />
        <div
          *ngIf="
            profileForm.get('firstName')?.invalid &&
            profileForm.get('firstName')?.touched
          "
          class="error"
        >
          <span *ngIf="profileForm.get('firstName')?.hasError('required')"
            >Le prénom est obligatoire.</span
          >
        </div>
      </div>

      <div class="profile__field">
        <label for="lastName" class="profile__label">Nom</label>
        <input
          type="text"
          class="profile__input"
          formControlName="lastName"
          required
        />
        <div
          *ngIf="
            profileForm.get('lastName')?.invalid &&
            profileForm.get('lastName')?.touched
          "
          class="error"
        >
          <span *ngIf="profileForm.get('lastName')?.hasError('required')"
            >Le nom est obligatoire.</span
          >
        </div>
      </div>

      <div class="profile__field">
        <label for="age" class="profile__label">Âge</label>
        <input
          type="number"
          class="profile__input"
          formControlName="age"
          required
        />
        <div
          *ngIf="
            profileForm.get('age')?.invalid && profileForm.get('age')?.touched
          "
          class="error"
        >
          <span *ngIf="profileForm.get('age')?.hasError('required')"
            >L'âge est obligatoire.</span
          >
          <span *ngIf="profileForm.get('age')?.hasError('min')"
            >L'âge minimum est de 12 ans.</span
          >
        </div>
      </div>

      <div class="profile__field">
        <label for="phone" class="profile__label">Téléphone</label>
        <input
          type="text"
          class="profile__input"
          formControlName="phone"
          required
        />
        <div
          *ngIf="
            profileForm.get('phone')?.invalid &&
            profileForm.get('phone')?.touched
          "
          class="error"
        >
          <span *ngIf="profileForm.get('phone')?.hasError('required')"
            >Le numéro de téléphone est obligatoire.</span
          >
          <span *ngIf="profileForm.get('phone')?.hasError('pattern')"
            >Le numéro doit commencer par +33 ou 0 et contenir 9 chiffres.</span
          >
        </div>
      </div>
    </div>

    <div class="profile__field">
      <label for="description" class="profile__label">Description</label>
      <textarea class="profile__input" formControlName="description"></textarea>
    </div>

    <button
      class="profile__button"
      type="submit"
      [disabled]="profileForm.pristine"
    >
      Mettre à jour
    </button>
  </form>
  <p class="profile__message" *ngIf="message">{{ message }}</p>
</div>
